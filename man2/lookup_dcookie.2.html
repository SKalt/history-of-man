<!--
Copyright (C) 2003 John Levon &lt;levon@movementarian.org&gt;
%%%LICENSE_START(VERBATIM)
Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.
.\"
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.
.\"
Since the Linux kernel and libraries are constantly changing, this
manual page may be incorrect or out-of-date.  The author(s) assume no
responsibility for errors or omissions, or for damages resulting from
the use of the information contained herein.  The author(s) may not
have taken the same level of care in the production of this manual,
which is licensed free of charge, as they might when working
professionally.
.\"
Formatted or processed versions of this manual, if unaccompanied by
the source, must acknowledge the copyright and authors of this work.
%%%LICENSE_END
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of LOOKUP_DCOOKIE</TITLE>
</HEAD><BODY>
<H1>LOOKUP_DCOOKIE</H1>
Section: Linux Programmer's Manual (2)<BR>Updated: 2017-09-15<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

lookup_dcookie - return a directory entry's path
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>int lookup_dcookie(u64 </B><I>cookie</I><B>, char *</B><I>buffer</I><B>, size_t </B><I>len</I><B>);</B>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

Look up the full path of the directory entry specified by the value
<I>cookie</I>.

The cookie is an opaque identifier uniquely identifying a particular
directory entry.
The buffer given is filled in with the full path of the directory entry.
<P>

For
<B>lookup_dcookie</B>()

to return successfully,
the kernel must still hold a cookie reference to the directory entry.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

On success,
<B>lookup_dcookie</B>()

returns the length of the path string copied into the buffer.
On error, -1 is returned, and
<I>errno</I>

is set appropriately.
<A NAME="lbAF">&nbsp;</A>
<H2>ERRORS</H2>

<DL COMPACT>
<DT><B>EFAULT</B>

<DD>
The buffer was not valid.
<DT><B>EINVAL</B>

<DD>
The kernel has no registered cookie/directory entry mappings at the
time of lookup, or the cookie does not refer to a valid directory entry.
<DT><B>ENAMETOOLONG</B>

<DD>
The name could not fit in the buffer.
<DT><B>ENOMEM</B>

<DD>
The kernel could not allocate memory for the temporary buffer holding
the path.
<DT><B>EPERM</B>

<DD>
The process does not have the capability
<B>CAP_SYS_ADMIN</B>

required to look up cookie values.
<DT><B>ERANGE</B>

<DD>
The buffer was not large enough to hold the path of the directory entry.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>VERSIONS</H2>

Available since Linux 2.5.43.
The
<B>ENAMETOOLONG</B>

error return was added in 2.5.70.
<A NAME="lbAH">&nbsp;</A>
<H2>CONFORMING TO</H2>

<B>lookup_dcookie</B>()

is Linux-specific.
<A NAME="lbAI">&nbsp;</A>
<H2>NOTES</H2>

<B>lookup_dcookie</B>()

is a special-purpose system call, currently used only by the
<B><A HREF="../man1/oprofile.1.html">oprofile</A></B>(1)

profiler.
It relies on a kernel driver to register cookies for directory entries.
<P>

The path returned may be suffixed by the string &quot; (deleted)&quot; if the directory
entry has been removed.
<A NAME="lbAJ">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man1/oprofile.1.html">oprofile</A></B>(1)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">ERRORS</A><DD>
<DT><A HREF="#lbAG">VERSIONS</A><DD>
<DT><A HREF="#lbAH">CONFORMING TO</A><DD>
<DT><A HREF="#lbAI">NOTES</A><DD>
<DT><A HREF="#lbAJ">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 03:50:51 GMT, April 20, 2020
</BODY>
</HTML>
