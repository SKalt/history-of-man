<!--
Copyright (C) 1996 Andries Brouwer (aeb@cwi.nl)
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of QUOTACTL</TITLE>
</HEAD><BODY>
<H1>QUOTACTL</H1>
Section: Linux Programmer's Manual (2)<BR>Updated: 2007-06-01<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

quotactl - manipulate disk quota
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:///usr/include/sys/types.h">sys/types.h</A>&gt;</B>
<BR>
<B>#include &lt;<A HREF="file:///usr/include/sys/quota.h">sys/quota.h</A>&gt;</B>

<B>int quotactl(int </B><I>cmd</I><B>, const char *</B><I>special</I><B>, int </B><I>id</I><B>, caddr_t </B><I>addr</I><B>);</B>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

The quota system defines for each user and/or group a soft limit
and a hard limit bounding the amount of disk space that can be
used on a given file system.
The hard limit cannot be crossed.
The soft limit can be crossed, but warnings will ensue.
Moreover,
the user cannot be above the soft limit for more than one week (by default)
at a time: after this week the soft limit counts as hard limit.
<P>
The
<B>quotactl</B>()

system call manipulates these quota.
Its first argument is
of the form
<B>QCMD(</B><I>subcmd</I><B>,</B><I>type</I><B>)</B>

where
<I>type</I>

is either
<B>USRQUOTA</B>

or
<B>GRPQUOTA</B>

(for user quota and group quota, respectively), and
<I>subcmd</I>

is described below.
<P>
The second argument
<I>special</I>

is the block special device these quota apply to.
It must be mounted.
<P>
The third argument
<I>id</I>

is the user or group ID these quota apply to (when relevant).
<P>
The fourth argument
<I>addr</I>

is the address of a data structure, depending on the command.
<P>
The
<I>subcmd</I>

is one of
<DL COMPACT>
<DT><B>Q_QUOTAON</B>

<DD>
Enable quota.
The
<I>addr</I>

argument is the pathname of the file containing
the quota for the filesystem.
<DT><B>Q_QUOTAOFF</B>

<DD>
Disable quota.
<DT><B>Q_GETQUOTA</B>

<DD>
Get limits and current usage of disk space.
The
<I>addr</I>

argument is a pointer to a dqblk structure (defined in
<I>&lt;<A HREF="file:///usr/include/sys/quota.h">sys/quota.h</A>&gt;</I>).

<DT><B>Q_SETQUOTA</B>

<DD>
Set limits and current usage;
<I>addr</I>

is as before.
<DT><B>Q_SETQLIM</B>

<DD>
Set limits;
<I>addr</I>

is as before.
<DT><B>Q_SETUSE</B>

<DD>
Set usage.
<DT><B>Q_SYNC</B>

<DD>
Sync disk copy of a filesystem's quota.
<DT><B>Q_GETSTATS</B>

<DD>
Get collected stats.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

On success,
<B>quotactl</B>()

returns 0.
On error, -1 is returned, and
<I>errno</I>

is set appropriately.
<A NAME="lbAF">&nbsp;</A>
<H2>ERRORS</H2>

<DL COMPACT>
<DT><B>EACCES</B>

<DD>
The quota file is not an ordinary file.
<DT><B>EBUSY</B>

<DD>
<B>Q_QUOTAON</B>

was asked, but quotas were enabled already.
<DT><B>EFAULT</B>

<DD>
Bad
<I>addr</I>

value.
<DT><B>EINVAL</B>

<DD>
<I>type</I>

is not a known quota type.
Or,
<I>special</I>

could not be found.
<DT><B>EIO</B>

<DD>
Cannot read or write the quota file.
<DT><B>EMFILE</B>

<DD>
Too many open files: cannot open quota file.
<DT><B>ENODEV</B>

<DD>
<I>special</I>

cannot be found in the mount table.
<DT><B>ENOPKG</B>

<DD>
The kernel was compiled without quota support.
<DT><B>ENOTBLK</B>

<DD>
<I>special</I>

is not a block special device.
<DT><B>EPERM</B>

<DD>
The process was not root (for the file system), and
<B>Q_GETQUOTA</B>

was asked for another
<I>id</I>

than that of the process itself, or anything other than
<B>Q_GETSTATS</B>

or
<B>Q_SYNC</B>

was asked.
<DT><B>ESRCH</B>

<DD>
<B>Q_GETQUOTA</B>

or
<B>Q_SETQUOTA</B>

or
<B>Q_SETUSE</B>

or
<B>Q_SETQLIM</B>

was asked for a file system that didn't have quota enabled.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>CONFORMING TO</H2>

BSD
<A NAME="lbAH">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man1/quota.1.html">quota</A></B>(1),

<B><A HREF="../man2/getrlimit.2.html">getrlimit</A></B>(2),

<B><A HREF="../man2/setrlimit.2.html">setrlimit</A></B>(2),

<B><A HREF="../man3/ulimit.3.html">ulimit</A></B>(3),

<B><A HREF="../man8/quotacheck.8.html">quotacheck</A></B>(8),

<B><A HREF="../man8/quotaon.8.html">quotaon</A></B>(8)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">ERRORS</A><DD>
<DT><A HREF="#lbAG">CONFORMING TO</A><DD>
<DT><A HREF="#lbAH">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:46:28 GMT, April 20, 2020
</BODY>
</HTML>
