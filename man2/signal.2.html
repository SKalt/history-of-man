<!--
Copyright (c) 2000 Andries Brouwer &lt;aeb@cwi.nl&gt;
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of SIGNAL</TITLE>
</HEAD><BODY>
<H1>SIGNAL</H1>
Section: Linux Programmer's Manual (2)<BR>Updated: 2007-06-03<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

signal - ANSI C signal handling
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#include &lt;<A HREF="file:///usr/include/signal.h">signal.h</A>&gt;</B>

<P>
<B>typedef void (*sighandler_t)(int);</B>

<P>
<B>sighandler_t signal(int </B><I>signum</I><B>, sighandler_t </B><I>handler</I><B>);</B>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

The behavior of
<B>signal</B>()

varies across Unix versions,
and has also varied historically across different versions of Linux.
<B>Avoid its use</B>: use
<B><A HREF="../man2/sigaction.2.html">sigaction</A></B>(2)

instead.
See <I>Portability</I> below.
<P>
<B>signal</B>()

sets the disposition of the signal
<I>signum</I>

to
<I>handler</I>,

which is either
<B>SIG_IGN</B>,

<B>SIG_DFL</B>,

or the address of a programmer-defined function (a &quot;signal handler&quot;).
<P>
If the signal
<I>signum</I>

is delivered to the process, then one of the following happens:
<DL COMPACT>
<DT>*<DD>
If the disposition is set to
<B>SIG_IGN</B>,

then the signal is ignored.
<DT>*<DD>
If the disposition is set to
<B>SIG_DFL</B>,

then the default action associated with the signal (see
<B><A HREF="../man7/signal.7.html">signal</A></B>(7))

occurs.
<DT>*<DD>
If the disposition is set to a function,
then first either the disposition is reset to
<B>SIG_DFL</B>,

or the signal is blocked (see <I>Portability</I> below), and then
<I>handler</I>

is called with argument
<I>signum</I>.

If invocation of the handler caused the signal to be blocked,
then the signal is unblocked upon return from the handler.
</DL>
<P>

The signals
<B>SIGKILL</B>

and
<B>SIGSTOP</B>

cannot be caught or ignored.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

<B>signal</B>()

returns the previous value of the signal handler, or
<B>SIG_ERR</B>

on error.
<A NAME="lbAF">&nbsp;</A>
<H2>ERRORS</H2>

<DL COMPACT>
<DT><B>EINVAL</B>

<DD>
<I>signum</I>

is invalid.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>CONFORMING TO</H2>

C89, C99, POSIX.1-2001.
<A NAME="lbAH">&nbsp;</A>
<H2>NOTES</H2>

The effects of
<B>signal</B>()

in a multi-threaded process are unspecified.
<P>

According to POSIX, the behavior of a process is undefined after it
ignores a
<B>SIGFPE</B>,

<B>SIGILL</B>,

or
<B>SIGSEGV</B>

signal that was not generated by
<B><A HREF="../man2/kill.2.html">kill</A></B>(2)

or
<B><A HREF="../man3/raise.3.html">raise</A></B>(3).

Integer division by zero has undefined result.
On some architectures it will generate a
<B>SIGFPE</B>

signal.
(Also dividing the most negative integer by -1 may generate
<B>SIGFPE</B>.)

Ignoring this signal might lead to an endless loop.
<P>

See
<B><A HREF="../man2/sigaction.2.html">sigaction</A></B>(2)

for details on what happens when
<B>SIGCHLD</B>

is set to
<B>SIG_IGN</B>.

<P>

See
<B><A HREF="../man7/signal.7.html">signal</A></B>(7)

for a list of the async-signal-safe functions that can be
safely called inside from inside a signal handler.
<P>

The use of
<I>sighandler_t</I>

is a GNU extension.
Various versions of libc predefine this type; libc4 and libc5 define
<I>SignalHandler</I>,

glibc defines
<I>sig_t</I>

and, when
<B>_GNU_SOURCE</B>

is defined, also
<I>sighandler_t</I>.

<A NAME="lbAI">&nbsp;</A>
<H3>Portability</H3>

The original Unix
<B>signal</B>()

would reset the handler to
<B>SIG_DFL</B>,

and System V
(and the Linux kernel and libc4,5) does the same.
On the other hand, BSD does not reset the handler, but blocks
new instances of this signal from occurring during a call of the handler.
The glibc2 library follows the BSD behavior.
<P>
If one on a libc5 system includes
<I>&lt;<A HREF="file:///usr/include/bsd/signal.h">bsd/signal.h</A>&gt;</I>

instead of
<I>&lt;<A HREF="file:///usr/include/signal.h">signal.h</A>&gt;</I>

then
<B>signal</B>()

is redefined as
<B>__bsd_signal</B>()

and
<B>signal</B>()

has the BSD semantics.
This is not recommended.
<P>
If one on a glibc2 system defines a feature test
macro such as
<B>_XOPEN_SOURCE</B>

or uses a separate
<B><A HREF="../man3/sysv_signal.3.html">sysv_signal</A></B>(3)

function, one obtains classical behavior.
This is not recommended.
<A NAME="lbAJ">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man1/kill.1.html">kill</A></B>(1),

<B><A HREF="../man2/alarm.2.html">alarm</A></B>(2),

<B><A HREF="../man2/kill.2.html">kill</A></B>(2),

<B><A HREF="../man2/killpg.2.html">killpg</A></B>(2),

<B><A HREF="../man2/pause.2.html">pause</A></B>(2),

<B><A HREF="../man2/sigaction.2.html">sigaction</A></B>(2),

<B><A HREF="../man2/sigpending.2.html">sigpending</A></B>(2),

<B><A HREF="../man2/sigprocmask.2.html">sigprocmask</A></B>(2),

<B><A HREF="../man2/sigqueue.2.html">sigqueue</A></B>(2),

<B><A HREF="../man2/sigsuspend.2.html">sigsuspend</A></B>(2),

<B><A HREF="../man3/bsd_signal.3.html">bsd_signal</A></B>(3),

<B><A HREF="../man3/raise.3.html">raise</A></B>(3),

<B><A HREF="../man3/siginterrupt.3.html">siginterrupt</A></B>(3),

<B><A HREF="../man3/sigsetops.3.html">sigsetops</A></B>(3),

<B><A HREF="../man3/sigvec.3.html">sigvec</A></B>(3),

<B><A HREF="../man3/sysv_signal.3.html">sysv_signal</A></B>(3),

<B><A HREF="../man7/feature_test_macros.7.html">feature_test_macros</A></B>(7),

<B><A HREF="../man7/signal.7.html">signal</A></B>(7)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">ERRORS</A><DD>
<DT><A HREF="#lbAG">CONFORMING TO</A><DD>
<DT><A HREF="#lbAH">NOTES</A><DD>
<DL>
<DT><A HREF="#lbAI">Portability</A><DD>
</DL>
<DT><A HREF="#lbAJ">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:51:03 GMT, April 20, 2020
</BODY>
</HTML>
