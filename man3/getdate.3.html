<!--
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of GETDATE</TITLE>
</HEAD><BODY>
<H1>GETDATE</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 2007-07-26<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

getdate, getdate_r - convert a string to struct tm
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#define _XOPEN_SOURCE 500</B>

<BR>

<B>#include &lt;<A HREF="file:///usr/include/time.h">time.h</A>&gt;</B>

<P>
<B>struct tm *getdate(const char *</B><I>string</I><B>);</B>

<P>
<B>extern int getdate_err;</B>

<P>
<B>#define _GNU_SOURCE</B>

<BR>

<B>#include &lt;<A HREF="file:///usr/include/time.h">time.h</A>&gt;</B>

<P>
<B>int getdate_r(const char *</B><I>string</I><B>, struct tm *</B><I>res</I><B>);</B>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

The function
<B>getdate</B>()

converts a string pointed to by
<I>string</I>

into the
<I>tm</I>

structure that it returns.
This
<I>tm</I>

structure may be found in static storage, so that
it will be overwritten by the next call.
<P>
In contrast to
<B><A HREF="../man3/strptime.3.html">strptime</A></B>(3),

(which has a
<I>format</I>

argument),
<B>getdate</B>()

uses the formats found in the file
of which the full pathname is given in the environment variable
<B>DATEMSK</B>.

The first line in the file that matches the given input string
is used for the conversion.
<P>
The matching is done case insensitively.
Superfluous whitespace, either in the pattern or in the string to
be converted, is ignored.
<P>
The conversion specifications that a pattern can contain are those given for
<B><A HREF="../man3/strptime.3.html">strptime</A></B>(3).

One more conversion specification is accepted:
<DL COMPACT>
<DT><B>%Z</B>

<DD>
Timezone name.
</DL>
<P>

When
<B>%Z</B>

is given, the value to be returned is initialized to the broken-down time
corresponding to the current time in the given time zone.
Otherwise, it is initialized to the broken-down time corresponding to
the current local time.
<P>

When only the weekday is given, the day is taken to be the first such day
on or after today.
<P>

When only the month is given (and no year), the month is taken to
be the first such month equal to or after the current month.
If no day is given, it is the first day of the month.
<P>

When no hour, minute and second are given, the current
hour, minute and second are taken.
<P>

If no date is given, but we know the hour, then that hour is taken
to be the first such hour equal to or after the current hour.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

When successful, this function returns a pointer to a
<I>struct tm</I>.

Otherwise, it returns NULL and sets the global variable
<I>getdate_err</I>.

Changes to
<I>errno</I>

are unspecified.
The following values for
<I>getdate_err</I>

are defined:
<DL COMPACT>
<DT><B>1</B>

<DD>
The
<B>DATEMSK</B>

environment variable is null or undefined.
<DT><B>2</B>

<DD>
The template file cannot be opened for reading.
<DT><B>3</B>

<DD>
Failed to get file status information.
<DT><B>4</B>

<DD>
The template file is not a regular file.
<DT><B>5</B>

<DD>
An error is encountered while reading the template file.
<DT><B>6</B>

<DD>
Memory allocation failed (not enough memory available).
<DT><B>7</B>

<DD>
There is no line in the file that matches the input.
<DT><B>8</B>

<DD>
Invalid input specification.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>ENVIRONMENT</H2>

<DL COMPACT>
<DT><B>DATEMSK</B>

<DD>
File containing format patterns.
<DT><B>TZ</B>, <B>LC_TIME</B>

<DD>
Variables used by
<B><A HREF="../man3/strptime.3.html">strptime</A></B>(3).

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>CONFORMING TO</H2>

POSIX.1-2001.
<A NAME="lbAH">&nbsp;</A>
<H2>NOTES</H2>

Since
<B>getdate</B>()

is not reentrant because of the use of
<I>getdate_err</I>

and the static buffer to return the result in, glibc provides a
thread-safe variant.
The functionality is the same.
The result is returned in the buffer pointed to by
<I>res</I>

and in case of an error the return value is non-zero with the same
values as given above for
<I>getdate_err</I>.

<P>

The POSIX.1-2001 specification for
<B><A HREF="../man3/strptime.3.html">strptime</A></B>(3)

contains conversion specifications using the
<B>%E</B>

or
<B>%O</B>

modifier, while such specifications are not given for
<B>getdate</B>().

The glibc implementation implements
<B>getdate</B>()

using
<B><A HREF="../man3/strptime.3.html">strptime</A></B>(3)

so that automatically precisely the same conversions are supported by both.
<P>

The glibc implementation does not support the
<B>%Z</B>

conversion specification.
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man2/time.2.html">time</A></B>(2),

<B><A HREF="../man3/localtime.3.html">localtime</A></B>(3),

<B><A HREF="../man3/setlocale.3.html">setlocale</A></B>(3),

<B><A HREF="../man3/strftime.3.html">strftime</A></B>(3),

<B><A HREF="../man3/strptime.3.html">strptime</A></B>(3),

<B><A HREF="../man7/feature_test_macros.7.html">feature_test_macros</A></B>(7)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">ENVIRONMENT</A><DD>
<DT><A HREF="#lbAG">CONFORMING TO</A><DD>
<DT><A HREF="#lbAH">NOTES</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:57:27 GMT, April 20, 2020
</BODY>
</HTML>
