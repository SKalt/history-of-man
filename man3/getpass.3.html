<!--
Copyright (c) 2000 Andries Brouwer (aeb@cwi.nl)
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of GETPASS</TITLE>
</HEAD><BODY>
<H1>GETPASS</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 2000-12-05<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

getpass - get a password
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#include &lt;<A HREF="file:///usr/include/unistd.h">unistd.h</A>&gt;</B>

<P>
<B>char *getpass( const char * prompt );</B>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

This function is obsolete. Do not use it.
<P>

The
<B>getpass</B>()

function opens
<I>/dev/tty</I>

(the controlling terminal of the process), outputs the string
<I>prompt</I>,

turns off echoing, reads one line (the &quot;password&quot;),
restores the terminal state and closes
<I>/dev/tty</I>

again.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

The function
<B>getpass</B>()

returns a pointer to a static buffer containing the
(first PASS_MAX bytes of) the password without the trailing
newline, terminated by a null byte ('\0').
This buffer may be overwritten by a following call.
On error, the terminal state is restored,
<I>errno</I>

is set appropriately, and NULL is returned.
<A NAME="lbAF">&nbsp;</A>
<H2>ERRORS</H2>

The function may fail if
<DL COMPACT>
<DT><B>ENXIO</B>

<DD>
The process does not have a controlling terminal. 
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>NOTES</H2>

For libc4 and libc5, the prompt is not written to
<I>/dev/tty</I>

but to
<I>stderr</I>.

Moreover, if
<I>/dev/tty</I>

cannot be opened, the password is read from
<I>stdin</I>.

The static buffer has length 128 so that only the first 127
bytes of the password are returned.
While reading the password, signal generation (SIGINT, SIGQUIT,
SIGSTOP, SIGTSTOP) is disabled and the corresponding characters
(usually control-C, control-\, control-Z and control-Y)
are transmitted as part of the password.
Since libc 5.4.19 also line editing is disabled, so that also
backspace and the like will be seen as part of the password.
<P>

For glibc2, if
<I>/dev/tty</I>

cannot be opened, the prompt is written to
<I>stderr</I>

and the password is read from
<I>stdin</I>.

There is no limit on the length of the password.
Line editing is not disabled.
<P>

According to the SUSv2, the value of PASS_MAX must be defined in
<I>&lt;<A HREF="file:///usr/include/limits.h">limits.h</A>&gt;</I>

in case it is smaller than 8, and can in any case be obtained using
<I>sysconf(_SC_PASS_MAX)</I>.

However, POSIX.2 withdraws the constants PASS_MAX
and _SC_PASS_MAX, and the function
<B>getpass</B>().

Libc4 and libc5 have never supported PASS_MAX or _SC_PASS_MAX.
Glibc2 accepts _SC_PASS_MAX and returns BUFSIZ (e.g., 8192).
<A NAME="lbAH">&nbsp;</A>
<H2>FILES</H2>

<I>/dev/tty</I>

<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man3/crypt.3.html">crypt</A></B>(3)

<A NAME="lbAJ">&nbsp;</A>
<H2>HISTORY</H2>

A
<B>getpass</B>()

function appeared in Version 7 AT&amp;T UNIX.
<A NAME="lbAK">&nbsp;</A>
<H2>BUGS</H2>

The calling process should zero the password as soon as possible to avoid
leaving the cleartext password visible in the process's address space.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">ERRORS</A><DD>
<DT><A HREF="#lbAG">NOTES</A><DD>
<DT><A HREF="#lbAH">FILES</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
<DT><A HREF="#lbAJ">HISTORY</A><DD>
<DT><A HREF="#lbAK">BUGS</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:29:19 GMT, April 20, 2020
</BODY>
</HTML>
