<!--
Copyright (c) Bruno Haible &lt;haible@clisp.cons.org&gt;
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of MBSTOWCS</TITLE>
</HEAD><BODY>
<H1>MBSTOWCS</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 1999-07-25<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

mbstowcs - convert a multibyte string to a wide character string
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:///usr/include/stdlib.h">stdlib.h</A>&gt;</B>

<B>size_t mbstowcs(wchar_t *</B><I>dest</I><B>, const char *</B><I>src</I><B>, size_t </B><I>n</I><B>);</B>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

If <I>dest</I> is not a NULL pointer, the <B>mbstowcs</B>() function converts the
multibyte string <I>src</I> to a wide-character string starting at <I>dest</I>.
At most <I>n</I> wide characters are written to <I>dest</I>. The conversion starts
in the initial state. The conversion can stop for three reasons:
<P>

1. An invalid multibyte sequence has been encountered. In this case
(size_t)(-1) is returned.
<P>

2. <I>n</I> non-L'\0' wide characters have been stored at <I>dest</I>. In this
case the number of wide characters written to <I>dest</I> is returned, but the
shift state at this point is lost.
<P>

3. The multibyte string has been completely converted, including the
terminating '\0'. In this case the number of wide characters written to
<I>dest</I>, excluding the terminating L'\0' character, is returned.
<P>

The programmer must ensure that there is room for at least <I>n</I> wide
characters at <I>dest</I>.
<P>

If <I>dest</I> is NULL, <I>n</I> is ignored, and the conversion proceeds as
above, except that the converted wide characters are not written out to memory,
and that no length limit exists.
<P>

In order to avoid the case 2 above, the programmer should make sure <I>n</I> is
greater or equal to <I>mbstowcs(NULL,src,0)+1</I>.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

The <B>mbstowcs</B>() function returns the number of wide characters that make
up the converted part of the wide character string, not including the
terminating null wide character. If an invalid multibyte sequence was
encountered, (size_t)(-1) is returned.
<A NAME="lbAF">&nbsp;</A>
<H2>CONFORMING TO</H2>

ISO/ANSI C, UNIX98
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man3/mbsrtowcs.3.html">mbsrtowcs</A></B>(3)

<A NAME="lbAH">&nbsp;</A>
<H2>NOTES</H2>

The behaviour of <B>mbstowcs</B>() depends on the LC_CTYPE category of the
current locale.
<P>

The function <B>mbsrtowcs</B>() provides a better interface to the same
functionality.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">CONFORMING TO</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
<DT><A HREF="#lbAH">NOTES</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:26:54 GMT, April 20, 2020
</BODY>
</HTML>
