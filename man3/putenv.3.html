<!--
Copyright 1993 David Metcalfe (david@prism.demon.co.uk)
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of PUTENV</TITLE>
</HEAD><BODY>
<H1>PUTENV</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 1993-04-08<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

putenv - change or add an environment variable
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:///usr/include/stdlib.h">stdlib.h</A>&gt;</B>

<B>int putenv(char *</B><I>string</I><B>);</B>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

The <B>putenv</B>() function adds or changes the value of environment
variables.  The argument <I>string</I> is of the form <I>name</I>=<I>value</I>.
If <I>name</I> does not already exist in the environment, then 
<I>string</I> is added to the environment.  If <I>name</I> does exist,
then the value of <I>name</I> in the environment is changed to 
<I>value</I>.
The string pointed to by <I>string</I> becomes part of the environment,
so altering the string changes the environment.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

The <B>putenv</B>() function returns zero on success,
or non-zero if an error occurs.
<A NAME="lbAF">&nbsp;</A>
<H2>ERRORS</H2>

<DL COMPACT>
<DT><B>ENOMEM</B>

<DD>
Insufficient space to allocate new environment.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>NOTES</H2>

The <B>putenv</B>() function is not required to be reentrant, and the
one in libc4, libc5 and glibc2.0 is not, but the glibc2.1 version is.
<P>

Description for libc4, libc5, glibc:
If the argument <I>string</I> is of the form <I>name</I>,
and does not contain an `=' character, then the variable <I>name</I>
is removed from the environment.
If <B>putenv</B>() has to allocate a new array <I>environ</I>,
and the previous array was also allocated by <B>putenv</B>(),
then it will be freed. In no case will the old storage associated
to the environment variable itself be freed.
<P>

The libc4 and libc5 and glibc 2.1.2 versions conform to SUSv2:
the pointer <I>string</I> given to <B>putenv</B>() is used.
In particular, this string becomes part of the environment;
changing it later will change the environment.
(Thus, it is an error is to call <B>putenv</B>() with an automatic variable
as the argument, then return from the calling function while <I>string</I>
is still part of the environment.)
However, glibc 2.0-2.1.1 differs: a copy of the string is used.
On the one hand this causes a memory leak, and on the other hand
it violates SUSv2. This has been fixed in glibc2.1.2.
<P>

The 4.4BSD version, like glibc 2.0, uses a copy.
<P>

SUSv2 removes the `const' from the prototype, and so does glibc 2.1.3.
<A NAME="lbAH">&nbsp;</A>
<H2>CONFORMING TO</H2>

SVID 3, POSIX, 4.3BSD
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man3/clearenv.3.html">clearenv</A></B>(3),

<B><A HREF="../man3/getenv.3.html">getenv</A></B>(3),

<B><A HREF="../man3/setenv.3.html">setenv</A></B>(3),

<B><A HREF="../man3/unsetenv.3.html">unsetenv</A></B>(3),

<B><A HREF="../man7/environ.7.html">environ</A></B>(7)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">ERRORS</A><DD>
<DT><A HREF="#lbAG">NOTES</A><DD>
<DT><A HREF="#lbAH">CONFORMING TO</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:27:23 GMT, April 20, 2020
</BODY>
</HTML>
