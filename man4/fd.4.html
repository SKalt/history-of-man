<!--
Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
%%%LICENSE_START(GPLv2+_DOC_FULL)
This is free documentation; you can redistribute it and/or
modify it under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 2 of
the License, or (at your option) any later version.
.\"
The GNU General Public License's references to "object code"
and "executables" are to be interpreted as the output of any
document formatting or typesetting system, including
intermediate and printed output.
.\"
This manual is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
.\"
You should have received a copy of the GNU General Public
License along with this manual; if not, see
&lt;http://www.gnu.org/licenses/&gt;.
%%%LICENSE_END
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of FD</TITLE>
</HEAD><BODY>
<H1>FD</H1>
Section: Linux Programmer's Manual (4)<BR>Updated: 2014-05-10<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

fd - floppy disk device
<A NAME="lbAC">&nbsp;</A>
<H2>CONFIGURATION</H2>

Floppy drives are block devices with major number 2.
Typically they
are owned by
root:floppy
(i.e., user root, group floppy) and have
either mode 0660 (access checking via group membership) or mode 0666
(everybody has access).
The minor
numbers encode the device type, drive number, and controller number.
For each device type (that is, combination of density and track count)
there is a base minor number.
To this base number, add the drive's
number on its controller and 128 if the drive is on the secondary
controller.
In the following device tables, <I>n</I> represents the
drive number.
<P>

<B>Warning: if you use formats with more tracks
than supported by your drive, you may cause it mechanical damage.</B>
Trying once if more tracks than the usual 40/80 are supported should not
damage it, but no warranty is given for that.
If you are not sure, don't create device
entries for those formats, so as to prevent their usage.
<P>

Drive-independent device files which automatically detect the media
format and capacity:
<TABLE>
<TR VALIGN=top><TD>Name</TD><TD ALIGN=center>Base<BR></TD></TR>
<TR VALIGN=top><TD></TD><TD ALIGN=center>minor #<BR></TD></TR>
<TR VALIGN=top><TD COLSPAN=2><HR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I></TD><TD ALIGN=center>0<BR></TD></TR>
</TABLE>

<P>

5.25 inch double-density device files:
<TABLE>
<TR VALIGN=top><TD>Name</TD><TD>Capacity</TD><TD>Cyl.</TD><TD>Sect.</TD><TD>Heads</TD><TD ALIGN=center>Base<BR></TD></TR>
<TR VALIGN=top><TD></TD><TD ALIGN=center>KiB</TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center>minor #<BR></TD></TR>
<TR VALIGN=top><TD COLSPAN=6><HR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>d360</B></TD><TD ALIGN=center>360</TD><TD ALIGN=center>40</TD><TD ALIGN=center>9</TD><TD ALIGN=center>2</TD><TD ALIGN=center>4<BR></TD></TR>
</TABLE>

<P>

5.25 inch high-density device files:
<TABLE>
<TR VALIGN=top><TD>Name</TD><TD>Capacity</TD><TD>Cyl.</TD><TD>Sect.</TD><TD>Heads</TD><TD ALIGN=center>Base<BR></TD></TR>
<TR VALIGN=top><TD></TD><TD ALIGN=center>KiB</TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center>minor #<BR></TD></TR>
<TR VALIGN=top><TD COLSPAN=6><HR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h360</B></TD><TD ALIGN=center>360</TD><TD ALIGN=center>40</TD><TD ALIGN=center>9</TD><TD ALIGN=center>2</TD><TD ALIGN=center>20<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h410</B></TD><TD ALIGN=center>410</TD><TD ALIGN=center>41</TD><TD ALIGN=center>10</TD><TD ALIGN=center>2</TD><TD ALIGN=center>48<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h420</B></TD><TD ALIGN=center>420</TD><TD ALIGN=center>42</TD><TD ALIGN=center>10</TD><TD ALIGN=center>2</TD><TD ALIGN=center>64<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h720</B></TD><TD ALIGN=center>720</TD><TD ALIGN=center>80</TD><TD ALIGN=center>9</TD><TD ALIGN=center>2</TD><TD ALIGN=center>24<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h880</B></TD><TD ALIGN=center>880</TD><TD ALIGN=center>80</TD><TD ALIGN=center>11</TD><TD ALIGN=center>2</TD><TD ALIGN=center>80<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h1200</B></TD><TD ALIGN=center>1200</TD><TD ALIGN=center>80</TD><TD ALIGN=center>15</TD><TD ALIGN=center>2</TD><TD ALIGN=center>8<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h1440</B></TD><TD ALIGN=center>1440</TD><TD ALIGN=center>80</TD><TD ALIGN=center>18</TD><TD ALIGN=center>2</TD><TD ALIGN=center>40<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h1476</B></TD><TD ALIGN=center>1476</TD><TD ALIGN=center>82</TD><TD ALIGN=center>18</TD><TD ALIGN=center>2</TD><TD ALIGN=center>56<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h1494</B></TD><TD ALIGN=center>1494</TD><TD ALIGN=center>83</TD><TD ALIGN=center>18</TD><TD ALIGN=center>2</TD><TD ALIGN=center>72<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>h1600</B></TD><TD ALIGN=center>1600</TD><TD ALIGN=center>80</TD><TD ALIGN=center>20</TD><TD ALIGN=center>2</TD><TD ALIGN=center>92<BR></TD></TR>
</TABLE>

<P>

3.5 inch double-density device files:
<TABLE>
<TR VALIGN=top><TD>Name</TD><TD>Capacity</TD><TD>Cyl.</TD><TD>Sect.</TD><TD>Heads</TD><TD ALIGN=center>Base<BR></TD></TR>
<TR VALIGN=top><TD></TD><TD ALIGN=center>KiB</TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center>minor #<BR></TD></TR>
<TR VALIGN=top><TD COLSPAN=6><HR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u360</B></TD><TD ALIGN=center>360</TD><TD ALIGN=center>80</TD><TD ALIGN=center>9</TD><TD ALIGN=center>1</TD><TD ALIGN=center>12<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u720</B></TD><TD ALIGN=center>720</TD><TD ALIGN=center>80</TD><TD ALIGN=center>9</TD><TD ALIGN=center>2</TD><TD ALIGN=center>16<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u800</B></TD><TD ALIGN=center>800</TD><TD ALIGN=center>80</TD><TD ALIGN=center>10</TD><TD ALIGN=center>2</TD><TD ALIGN=center>120<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1040</B></TD><TD ALIGN=center>1040</TD><TD ALIGN=center>80</TD><TD ALIGN=center>13</TD><TD ALIGN=center>2</TD><TD ALIGN=center>84<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1120</B></TD><TD ALIGN=center>1120</TD><TD ALIGN=center>80</TD><TD ALIGN=center>14</TD><TD ALIGN=center>2</TD><TD ALIGN=center>88<BR></TD></TR>
</TABLE>

<P>

3.5 inch high-density device files:
<TABLE>
<TR VALIGN=top><TD>Name</TD><TD>Capacity</TD><TD>Cyl.</TD><TD>Sect.</TD><TD>Heads</TD><TD ALIGN=center>Base<BR></TD></TR>
<TR VALIGN=top><TD></TD><TD ALIGN=center>KiB</TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center>minor #<BR></TD></TR>
<TR VALIGN=top><TD COLSPAN=6><HR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u360</B></TD><TD ALIGN=center>360</TD><TD ALIGN=center>40</TD><TD ALIGN=center>9</TD><TD ALIGN=center>2</TD><TD ALIGN=center>12<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u720</B></TD><TD ALIGN=center>720</TD><TD ALIGN=center>80</TD><TD ALIGN=center>9</TD><TD ALIGN=center>2</TD><TD ALIGN=center>16<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u820</B></TD><TD ALIGN=center>820</TD><TD ALIGN=center>82</TD><TD ALIGN=center>10</TD><TD ALIGN=center>2</TD><TD ALIGN=center>52<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u830</B></TD><TD ALIGN=center>830</TD><TD ALIGN=center>83</TD><TD ALIGN=center>10</TD><TD ALIGN=center>2</TD><TD ALIGN=center>68<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1440</B></TD><TD ALIGN=center>1440</TD><TD ALIGN=center>80</TD><TD ALIGN=center>18</TD><TD ALIGN=center>2</TD><TD ALIGN=center>28<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1600</B></TD><TD ALIGN=center>1600</TD><TD ALIGN=center>80</TD><TD ALIGN=center>20</TD><TD ALIGN=center>2</TD><TD ALIGN=center>124<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1680</B></TD><TD ALIGN=center>1680</TD><TD ALIGN=center>80</TD><TD ALIGN=center>21</TD><TD ALIGN=center>2</TD><TD ALIGN=center>44<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1722</B></TD><TD ALIGN=center>1722</TD><TD ALIGN=center>82</TD><TD ALIGN=center>21</TD><TD ALIGN=center>2</TD><TD ALIGN=center>60<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1743</B></TD><TD ALIGN=center>1743</TD><TD ALIGN=center>83</TD><TD ALIGN=center>21</TD><TD ALIGN=center>2</TD><TD ALIGN=center>76<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1760</B></TD><TD ALIGN=center>1760</TD><TD ALIGN=center>80</TD><TD ALIGN=center>22</TD><TD ALIGN=center>2</TD><TD ALIGN=center>96<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1840</B></TD><TD ALIGN=center>1840</TD><TD ALIGN=center>80</TD><TD ALIGN=center>23</TD><TD ALIGN=center>2</TD><TD ALIGN=center>116<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u1920</B></TD><TD ALIGN=center>1920</TD><TD ALIGN=center>80</TD><TD ALIGN=center>24</TD><TD ALIGN=center>2</TD><TD ALIGN=center>100<BR></TD></TR>
</TABLE>

<P>

3.5 inch extra-density device files:
<TABLE>
<TR VALIGN=top><TD>Name</TD><TD>Capacity</TD><TD>Cyl.</TD><TD>Sect.</TD><TD>Heads</TD><TD ALIGN=center>Base<BR></TD></TR>
<TR VALIGN=top><TD></TD><TD ALIGN=center>KiB</TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center></TD><TD ALIGN=center>minor #<BR></TD></TR>
<TR VALIGN=top><TD COLSPAN=6><HR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u2880</B></TD><TD ALIGN=center>2880</TD><TD ALIGN=center>80</TD><TD ALIGN=center>36</TD><TD ALIGN=center>2</TD><TD ALIGN=center>32<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>CompaQ</B></TD><TD ALIGN=center>2880</TD><TD ALIGN=center>80</TD><TD ALIGN=center>36</TD><TD ALIGN=center>2</TD><TD ALIGN=center>36<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u3200</B></TD><TD ALIGN=center>3200</TD><TD ALIGN=center>80</TD><TD ALIGN=center>40</TD><TD ALIGN=center>2</TD><TD ALIGN=center>104<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u3520</B></TD><TD ALIGN=center>3520</TD><TD ALIGN=center>80</TD><TD ALIGN=center>44</TD><TD ALIGN=center>2</TD><TD ALIGN=center>108<BR></TD></TR>
<TR VALIGN=top><TD><B>fd</B><I>n</I><B>u3840</B></TD><TD ALIGN=center>3840</TD><TD ALIGN=center>80</TD><TD ALIGN=center>48</TD><TD ALIGN=center>2</TD><TD ALIGN=center>112<BR></TD></TR>
</TABLE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>fd</B> special files access the floppy disk drives in raw mode.
The following
<B><A HREF="../man2/ioctl.2.html">ioctl</A></B>(2)

calls are supported by <B>fd</B> devices:
<DL COMPACT>
<DT><B>FDCLRPRM</B><DD>
clears the media information of a drive (geometry of disk in drive).
<DT><B>FDSETPRM</B><DD>
sets the media information of a drive.
The media information will be
lost when the media is changed.
<DT><B>FDDEFPRM</B><DD>
sets the media information of a drive (geometry of disk in drive).
The media information will not be lost when the media is changed.
This will disable autodetection.
In order to reenable autodetection, you
have to issue an <B>FDCLRPRM</B>.
<DT><B>FDGETDRVTYP</B><DD>
returns the type of a drive (name parameter).
For formats which work
in several drive types, <B>FDGETDRVTYP</B> returns a name which is
appropriate for the oldest drive type which supports this format.
<DT><B>FDFLUSH</B><DD>
invalidates the buffer cache for the given drive.
<DT><B>FDSETMAXERRS</B><DD>
sets the error thresholds for reporting errors, aborting the operation,
recalibrating, resetting, and reading sector by sector.
<DT><B>FDSETMAXERRS</B><DD>
gets the current error thresholds.
<DT><B>FDGETDRVTYP</B><DD>
gets the internal name of the drive.
<DT><B>FDWERRORCLR</B><DD>
clears the write error statistics.
<DT><B>FDWERRORGET</B><DD>
reads the write error statistics.
These include the total number of
write errors, the location and disk of the first write error, and the
location and disk of the last write error.
Disks are identified by a
generation number which is incremented at (almost) each disk change.
<DT><B>FDTWADDLE</B><DD>
Switch the drive motor off for a few microseconds.
This might be
needed in order to access a disk whose sectors are too close together.
<DT><B>FDSETDRVPRM</B><DD>
sets various drive parameters.
<DT><B>FDGETDRVPRM</B><DD>
reads these parameters back.
<DT><B>FDGETDRVSTAT</B><DD>
gets the cached drive state (disk changed, write protected et al.)
<DT><B>FDPOLLDRVSTAT</B><DD>
polls the drive and return its state.
<DT><B>FDGETFDCSTAT</B><DD>
gets the floppy controller state.
<DT><B>FDRESET</B><DD>
resets the floppy controller under certain conditions.
<DT><B>FDRAWCMD</B><DD>
sends a raw command to the floppy controller.
</DL>
<P>

For more precise information, consult also the <I>&lt;<A HREF="file:///usr/include/linux/fd.h">linux/fd.h</A>&gt;</I> and
<I>&lt;<A HREF="file:///usr/include/linux/fdreg.h">linux/fdreg.h</A>&gt;</I> include files, as well as the
<B><A HREF="../man1/floppycontrol.1.html">floppycontrol</A></B>(1)

manual page.
<A NAME="lbAE">&nbsp;</A>
<H2>FILES</H2>

<I>/dev/fd*</I>

<A NAME="lbAF">&nbsp;</A>
<H2>NOTES</H2>

The various formats permit reading and writing many types of disks.
However, if a floppy is formatted with an inter-sector gap that is too small,
performance may drop,
to the point of needing a few seconds to access an entire track.
To prevent this, use interleaved formats.
<P>

It is not possible to
read floppies which are formatted using GCR (group code recording),
which is used by Apple II and Macintosh computers (800k disks).
<P>

Reading floppies which are hard sectored (one hole per sector, with
the index hole being a little skewed) is not supported.
This used to be common with older 8-inch floppies.



<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man1/chown.1.html">chown</A></B>(1),

<B><A HREF="../man1/floppycontrol.1.html">floppycontrol</A></B>(1),

<B><A HREF="../man1/getfdprm.1.html">getfdprm</A></B>(1),

<B><A HREF="../man1/mknod.1.html">mknod</A></B>(1),

<B><A HREF="../man1/superformat.1.html">superformat</A></B>(1),

<B><A HREF="../man8/mount.8.html">mount</A></B>(8),

<B><A HREF="../man8/setfdprm.8.html">setfdprm</A></B>(8)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">CONFIGURATION</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">FILES</A><DD>
<DT><A HREF="#lbAF">NOTES</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 03:50:24 GMT, April 20, 2020
</BODY>
</HTML>
