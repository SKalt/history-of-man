<!--
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of ICMP</TITLE>
</HEAD><BODY>
<H1>ICMP</H1>
Section: Linux Programmer's Manual (7)<BR>Updated: 1999-04-27<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

icmp, IPPROTO_ICMP - Linux IPv4 ICMP kernel module.
<A NAME="lbAC">&nbsp;</A>
<H2>DESCRIPTION</H2>

This kernel protocol module implements the Internet Control
Message Protocol defined in RFC&nbsp;792.
It is used to signal error conditions and for diagnosis.
The user doesn't interact directly with this module;
instead it communicates with the other protocols in the kernel
and these pass the ICMP errors to the application layers.
The kernel ICMP module also answers ICMP requests.
<P>

A user protocol may receive ICMP packets for all local sockets by opening
a raw socket with the protocol
<B>IPPROTO_ICMP</B>.

See
<B><A HREF="../man7/raw.7.html">raw</A></B>(7)

for more information.
The types of ICMP packets passed to the socket can be filtered using the
<B>ICMP_FILTER</B>

socket option.
ICMP packets are always processed by the kernel too, even
when passed to a user socket.
<P>

Linux limits the rate of ICMP error packets to each destination.
<B>ICMP_REDIRECT</B>

and
<B>ICMP_DEST_UNREACH</B>

are also limited by the destination route of the incoming packets.
<A NAME="lbAD">&nbsp;</A>
<H3>Sysctls</H3>

ICMP supports a sysctl interface to configure some global IP parameters.
The sysctls can be accessed by reading or writing the
<I>/proc/sys/net/ipv4/*</I>

files or with the
<B><A HREF="../man2/sysctl.2.html">sysctl</A></B>(2)

interface.
Most of these sysctls are rate limitations for specific ICMP types.
Linux 2.2 uses a token bucket filter to limit ICMPs.

The value is the timeout in jiffies until the token bucket filter is
cleared after a burst.
A jiffy is a system dependent unit, usually 10ms on i386 and
about 1ms on alpha and ia64.
<DL COMPACT>
<DT><B>icmp_destunreach_rate</B>

<DD>
Maximum rate to send ICMP Destination Unreachable packets.
This limits the rate at which packets are sent to any individual
route or destination.
The limit does not affect sending of
<B>ICMP_FRAG_NEEDED</B>

packets needed for path MTU discovery.
<DT><B>icmp_echo_ignore_all</B>

<DD>
If this value is non-zero, Linux will ignore all
<B>ICMP_ECHO</B>

requests.
<DT><B>icmp_echo_ignore_broadcasts</B>

<DD>
If this value is non-zero, Linux will ignore all
<B>ICMP_ECHO</B>

packets sent to broadcast addresses.
<DT><B>icmp_echoreply_rate</B>

<DD>
Maximum rate for sending
<B>ICMP_ECHOREPLY</B>

packets in response to
<B>ICMP_ECHOREQUEST</B>

packets.
<DT><B>icmp_paramprob_rate</B>

<DD>
Maximum rate for sending
<B>ICMP_PARAMETERPROB</B>

packets.
These packets are sent when a packet arrives with an invalid IP header.
<DT><B>icmp_timeexceed_rate</B>

<DD>
Maximum rate for sending
<B>ICMP_TIME_EXCEEDED</B>

packets.
These packets are
sent to prevent loops when a packet has crossed too many hops.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>VERSIONS</H2>

Support for the
<B>ICMP_ADDRESS</B>

request was removed in 2.2.
<P>

Support for
<B>ICMP_SOURCE_QUENCH</B>

was removed in Linux 2.2.
<A NAME="lbAF">&nbsp;</A>
<H2>NOTES</H2>

As many other implementations don't support
<B>IPPROTO_ICMP</B>

raw sockets, this feature
should not be relied on in portable programs.



<P>

<B>ICMP_REDIRECT</B>

packets are not sent when Linux is not acting as a router.
They are also only accepted from the old gateway defined in the
routing table and the redirect routes are expired after some time.
<P>

The 64-bit timestamp returned by
<B>ICMP_TIMESTAMP</B>

is in milliseconds since January 1, 1970.
<P>

Linux ICMP internally uses a raw socket to send ICMPs.
This raw socket may appear in
<B><A HREF="../man8/netstat.8.html">netstat</A></B>(8)

output with a zero inode.
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man7/ip.7.html">ip</A></B>(7)

<P>

RFC&nbsp;792 for a description of the ICMP protocol.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAD">Sysctls</A><DD>
</DL>
<DT><A HREF="#lbAE">VERSIONS</A><DD>
<DT><A HREF="#lbAF">NOTES</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:59:40 GMT, April 20, 2020
</BODY>
</HTML>
