<!--
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of IPV6</TITLE>
</HEAD><BODY>
<H1>IPV6</H1>
Section: Linux Programmer's Manual (7)<BR>Updated: 1999-06-29<BR><A HREF="#index">Index</A>
<A HREF="../index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ipv6, PF_INET6 - Linux IPv6 protocol implementation
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#include &lt;<A HREF="file:///usr/include/sys/socket.h">sys/socket.h</A>&gt;</B>

<BR>

<B>#include &lt;<A HREF="file:///usr/include/netinet/in.h">netinet/in.h</A>&gt; </B>

<P>
<P>
<I>tcp6_socket</I><B> = socket(PF_INET6, SOCK_STREAM, 0);</B>

<BR>

<I>raw6_socket</I><B> = socket(PF_INET6, SOCK_RAW, </B><I>protocol</I><B>);</B>

<BR>

<I>udp6_socket</I><B> = socket(PF_INET6, SOCK_DGRAM, </B><I>protocol</I><B>);</B>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

Linux 2.2 optionally implements the Internet Protocol, version 6. 
This man page contains a description of the IPv6 basic API as 
implemented by the Linux kernel and glibc 2.1. The interface 
is based on the BSD sockets interface; see
<B><A HREF="../man7/socket.7.html">socket</A></B>(7).

<P>

The IPv6 API aims to be mostly compatible with the 
<B><A HREF="../man7/ip.7.html">ip</A></B>(7)

v4 API. Only differences are described in this man page. 
<P>

To bind an 
<I>AF_INET6</I>

socket to any process the local address should be copied from the 
<B>in6addr_any</B>

variable which has 
<I>in6_addr </I>

type.
In static initializations 
<B>IN6ADDR_ANY_INIT</B>

may also be used, which expands to a constant expression.
Both of them are in network order.
<P>

The IPv6 loopback address (::1) is available in the global
<B>in6addr_loopback</B>

variable. For initializations
<B>IN6ADDR_LOOPBACK_INIT</B>

should be used.
<P>

IPv4 connections can be handled with the v6 API by using the v4-mapped-on-v6
address type; thus a program only needs only to support this API type to
support both protocols. This is handled transparently by the address
handling functions in libc. 
<P>

IPv4 and IPv6 share the local port space. When you get an IPv4 connection
or packet to a IPv6 socket its source address will be mapped to v6 and it'll
be mapped to v6.
<A NAME="lbAE">&nbsp;</A>
<H2>ADDRESS FORMAT</H2>

<P>
<DL COMPACT><DT><DD>
<PRE>

struct sockaddr_in6 {
    u_int16_t       sin6_family;/* AF_INET6 */
    u_int16_t       sin6_port;/* port number */
    u_int32_t       sin6_flowinfo;/* IPv6 flow information */
    struct in6_addr sin6_addr;/* IPv6 address */
    u_int32_t   sin6_scope_id;  /* Scope ID (new in 2.4) */ 
};

struct in6_addr {
    unsigned char   s6_addr[16];/* IPv6 address */
};

</PRE>

</DL>

<P>
<B>sin6_family </B>

is always set to 
<B>AF_INET6; </B>

<B>sin6_port </B>

is the protocol port (see
<B>sin_port</B>

in 
<B><A HREF="../man7/ip.7.html">ip</A></B>(7));

<B>sin6_flowinfo</B>

is the IPv6 flow identifier;
<B>sin6_addr</B>

is the 128bit IPv6 address.
<B>sin6_scope_id </B>

is an ID of depending of on the scope of the address. It is new in Linux 2.4.
Linux only supports it for link scope addresses, in that case
<I>sin6_scope_id</I>

contains the interface index (see
<B><A HREF="../man7/netdevice.7.html">netdevice</A></B>(7))

<P>

IPv6 supports several address types: unicast to address a single
host, multicast to address a group of hosts, anycast to address the nearest
member of a group of hosts (not implemented in Linux), IPv4-on-IPv6 to
address a IPv4 host, and other reserved address types.
<P>

The address notation for IPv6 is a group of 16 2 digit hexadecimal numbers,
separated with a ':'. '::' stands for a string of 0 bits.  Special addresses 
are ::1 for loopback and ::FFFF:&lt;IPv4 address&gt; for IPv4-mapped-on-IPv6.
<P>

The port space of IPv6 is shared with IPv4.
<A NAME="lbAF">&nbsp;</A>
<H2>SOCKET OPTIONS</H2>

IPv6 supports some protocol specific socket options that can be set with
<B><A HREF="../man2/setsockopt.2.html">setsockopt</A></B>(2)

and read with
<B><A HREF="../man2/getsockopt.2.html">getsockopt</A></B>(2).

The socket option level for IPv6 is 
<B>IPPROTO_IPV6</B>.

A boolean integer flag is zero when it is false, otherwise true.
<DL COMPACT>
<DT><B>IPV6_UNICAST_HOPS</B>

<DD>
Set the unicast hop limit for the socket. Argument is an pointer to an
integer. -1 in the value means use the route default, otherwise it should be 
between 0 and 255.
<DT><B>IPV6_MULTICAST_HOPS</B>

<DD>
Set the multicast hop limit for the socket. Argument is a pointer to an
integer. -1 in the value means use the route default, otherwise it should be 
between 0 and 255.
<DT><B>IPV6_MULTICAST_IF</B>

<DD>
Set the device for outgoing multicast packets on the socket.
This is only allowed
for 
<I>SOCK_DGRAM</I>

and 
<I>SOCK_RAW</I>

socket.
The argument is an pointer to an interface index (see
<B><A HREF="../man7/netdevice.7.html">netdevice</A></B>(7))

in an integer.
<DT><B>IPV6_ADDRFORM</B>

<DD>
Turn an 
<I>AF_INET6</I>

socket into a socket of a different address family. Only 
<I>AF_INET</I>

is currently supported for that. It is only allowed for IPv6 sockets
that are connected and bound to a v4-mapped-on-v6 address. The argument
is a pointer to a integer containing 
<B>AF_INET. </B>

This is useful to pass v4-mapped sockets as file descriptors to 
programs that don't know how to deal with the IPv6 API.
<DT><B>IPV6_PKTINFO</B>

<DD>
Set delivery of the 
<B>IPV6_PKTINFO </B>

control message on incoming datagrams. Only allowed for
<B>SOCK_DGRAM</B>

or
<B>SOCK_RAW</B>

sockets. Argument is a pointer to a boolean value in an integer.
<DT>
<DD>
<B>IPV6_RTHDR, IPV6_AUTHHDR, IPV6_DSTOPS, IPV6_HOPOPTS, IPV6_FLOWINFO, IPV6_HOPLIMIT</B>


Set delivery of control messages for incoming datagrams containing extension
headers from the received packet. 
<I>IPV6_RTHDR</I>

delivers the routing header,
<I>IPV6_AUTHHDR</I>

delivers the authentication header,
<I>IPV6_DSTOPTS</I>

delivers the destination options,
<I>IPV6_HOPOPTS</I>

delivers the hop options, 
<I>IPV6_FLOWINFO</I>

delivers an integer containing the flow ID,
<I>IPV6_HOPLIMIT</I>

delivers an integer containing the hop count of the packet. 
The control messages have the same type as the socket option. All these
header options can also be set for outgoing packets 
by putting the appropriate control message into the control buffer of 
<B><A HREF="../man2/sendmsg.2.html">sendmsg</A></B>(2).

Only allowed for
<B>SOCK_DGRAM</B>

or
<B>SOCK_RAW</B>

sockets. Argument is a pointer to a boolean value.
<DT><B>IPV6_MULTICAST_LOOP</B>

<DD>
Control whether the socket sees multicast packets that is has send itself.
Argument is a pointer to boolean.
<DT><B>IPV6_ADD_MEMBERSHIP, IPV6_DROP_MEMBERSHIP</B>

<DD>
Control membership in multicast groups. Argument is a pointer to a 
<B>struct ipv6_mreq</B>

structure.
<DT><B>IPV6_MTU</B>

<DD>
Set the MTU to be used for the socket. The MTU is limited by the device
MTU or the path mtu when path mtu discovery is enabled.
Argument is a pointer to integer.
<DT><B>IPV6_MTU_DISCOVER</B>

<DD>
Control path mtu discovery on the socket. See 
<I>IP_MTU_DISCOVER</I>

in 
<B><A HREF="../man7/ip.7.html">ip</A></B>(7)

for details.
<DT><B>IPV6_RECVERR</B>

<DD>
Control receiving of asynchronous error options. See 
<I>IP_RECVERR</I>

in
<B><A HREF="../man7/ip.7.html">ip</A></B>(7)

for details.
Argument is a pointer to boolean.
<DT><B>IPV6_ROUTER_ALERT</B>

<DD>
Pass all forwarded packets containing an router alert option to this socket.
Only allowed for datagram sockets and for root. Argument is a pointer to
boolean.

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>VERSIONS</H2>

The older 
<I>libinet6</I>

libc5 based IPv6 API implementation for Linux is not described here
and may vary in details. 
<P>

Linux 2.4 will break binary compatibility for the sockaddr_in6 for 64bit 
hosts by changing the alignment of
<I>in6_addr </I>

and adding an additional 
<I>sin6_scope_id</I>

field. The kernel interfaces stay compatible, but a program including
sockaddr_in6 or in6_addr into other structures may not be. This is not
a problem for 32bit hosts like i386.
<P>

The
<B>sin6_flowinfo</B>

field is new in Linux 2.4. It is transparently passed/read by the kernel
when the passed address length contains it. Some programs that pass a
longer address buffer and then check the outgoing address length may break.
<A NAME="lbAH">&nbsp;</A>
<H2>PORTING NOTES</H2>

The
<B>sockaddr_in6</B>

structure is bigger than the generic
<B>sockaddr. </B>

Programs that assume that all address types can be stored safely in a 
<B>struct sockaddr</B>

need to be changed to use 
<B>struct sockaddr_storage</B>

for that instead.
<A NAME="lbAI">&nbsp;</A>
<H2>BUGS</H2>

The IPv6 extended API as in RFC&nbsp;2292 is currently only partly implemented;
although the 2.2 kernel has near complete support for receiving options,
the macros for generating IPv6 options are missing in glibc 2.1. 
<P>

IPSec support for EH and AH headers is missing.
<P>

Flow label management is not complete and not documented here.
<P>

This man page is not complete.
<A NAME="lbAJ">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man3/cmsg.3.html">cmsg</A></B>(3),

<B><A HREF="../man7/ip.7.html">ip</A></B>(7)

<P>

RFC&nbsp;2553: IPv6 BASIC API. Linux tries to be compliant to this.
<P>

RFC&nbsp;2460: IPv6 specification. 
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">ADDRESS FORMAT</A><DD>
<DT><A HREF="#lbAF">SOCKET OPTIONS</A><DD>
<DT><A HREF="#lbAG">VERSIONS</A><DD>
<DT><A HREF="#lbAH">PORTING NOTES</A><DD>
<DT><A HREF="#lbAI">BUGS</A><DD>
<DT><A HREF="#lbAJ">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:17:14 GMT, April 20, 2020
</BODY>
</HTML>
